<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BankManagerApp.Views.PasswordResetPage"
             Title="Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"
             BackgroundColor="White">
    
    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="20" VerticalOptions="Center">
            
            <!-- Logo/Title -->
            <Label Text="ðŸ”‘" FontSize="60" HorizontalOptions="Center"/>
            <Label Text="Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center" TextColor="#333"/>
            <Label Text="Ú©Ø¯ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯" FontSize="14" HorizontalOptions="Center" TextColor="#888" Margin="0,0,0,20"/>
            
            <!-- Step 1: Email Input -->
            <VerticalStackLayout x:Name="Step1Container" Spacing="15">
                <Label Text="Ù…Ø±Ø­Ù„Ù‡ 1: ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ…ÛŒÙ„" FontSize="16" FontAttributes="Bold" TextColor="#512BD4"/>
                
                <Border StrokeShape="RoundRectangle 10" Stroke="#DDD" StrokeThickness="1" BackgroundColor="White">
                    <Entry x:Name="EmailEntry" 
                           Placeholder="Ø§ÛŒÙ…ÛŒÙ„" 
                           Keyboard="Email"
                           TextColor="#333"
                           PlaceholderColor="#999"
                           Margin="10,5"/>
                </Border>
                
                <Button x:Name="SendTokenButton"
                        Text="Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ"
                        BackgroundColor="#FF9800"
                        TextColor="White"
                        FontAttributes="Bold"
                        FontSize="16"
                        CornerRadius="10"
                        HeightRequest="50"
                        Clicked="OnSendTokenClicked"/>
            </VerticalStackLayout>
            
            <!-- Step 2: Token and New Password -->
            <VerticalStackLayout x:Name="Step2Container" Spacing="15" IsVisible="False">
                <Label Text="Ù…Ø±Ø­Ù„Ù‡ 2: ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ú©Ø¯ Ùˆ Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯" FontSize="16" FontAttributes="Bold" TextColor="#512BD4"/>
                
                <Label x:Name="TokenDisplayLabel" 
                       Text="" 
                       FontSize="14" 
                       TextColor="#4CAF50" 
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       IsVisible="False"/>
                
                <Border StrokeShape="RoundRectangle 10" Stroke="#DDD" StrokeThickness="1" BackgroundColor="White">
                    <Entry x:Name="TokenEntry" 
                           Placeholder="Ú©Ø¯ 6 Ø±Ù‚Ù…ÛŒ" 
                           Keyboard="Numeric"
                           MaxLength="6"
                           TextColor="#333"
                           PlaceholderColor="#999"
                           Margin="10,5"/>
                </Border>
                
                <Border StrokeShape="RoundRectangle 10" Stroke="#DDD" StrokeThickness="1" BackgroundColor="White">
                    <Entry x:Name="NewPasswordEntry" 
                           Placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ 6 Ú©Ø§Ø±Ø§Ú©ØªØ±)" 
                           IsPassword="True"
                           TextColor="#333"
                           PlaceholderColor="#999"
                           Margin="10,5"/>
                </Border>
                
                <Button x:Name="ResetPasswordButton"
                        Text="ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        FontAttributes="Bold"
                        FontSize="16"
                        CornerRadius="10"
                        HeightRequest="50"
                        Clicked="OnResetPasswordClicked"/>
            </VerticalStackLayout>
            
            <!-- Back to Login -->
            <Label Text="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯" 
                   FontSize="14" 
                   TextColor="#512BD4" 
                   HorizontalOptions="Center"
                   Margin="0,20,0,0">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnBackToLoginTapped"/>
                </Label.GestureRecognizers>
            </Label>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
